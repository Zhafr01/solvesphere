import{r as l,c as y,j as e,L as n}from"./app-BogXYbJ6.js";function v({user:r,header:d,children:x}){const[c,h]=l.useState(!1),[g,m]=l.useState(!1),[u,p]=l.useState(!0),[o,f]=l.useState(localStorage.getItem("theme")||"system"),{props:i}=y(),t=i.partner||r?.partner||null;console.log("User:",r),console.log("Partner:",t),console.log("User Profile Picture:",r?.profile_picture),t&&console.log("Partner Logo:",t.logo),l.useEffect(()=>{const s=window.document.documentElement;o==="dark"||o==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?s.classList.add("dark"):s.classList.remove("dark"),localStorage.setItem("theme",o)},[o]);const b=()=>{f(o==="dark"?"light":"dark")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx("div",{className:`fixed z-20 inset-0 bg-black opacity-50 transition-opacity lg:hidden ${g?"block":"hidden"}`,onClick:()=>m(!1)}),e.jsxs("div",{className:`fixed z-30 inset-y-0 left-0 w-80 transition duration-300 transform bg-white dark:bg-gray-800 overflow-y-auto lg:inset-0 border-r border-gray-200 dark:border-gray-700 
                ${g?"translate-x-0 ease-out":"-translate-x-full ease-in"}
                ${u?"lg:translate-x-0 lg:static":"lg:-translate-x-full lg:absolute"}
            `,children:[e.jsx("div",{className:"flex items-center justify-center mt-8 px-4",children:t?e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[t.logo?e.jsx("img",{src:t.logo.startsWith("http")?t.logo:`/storage/${t.logo.replace("public/","")}`,alt:t.name,className:"h-10 w-10 rounded-full object-cover border-2 border-white/20"}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-500 flex items-center justify-center text-white font-bold text-xs border-2 border-white/20",children:t.name.substring(0,2)}),e.jsx("span",{className:"text-gray-400 font-bold text-lg",children:"X"}),e.jsx(n,{href:route("dashboard"),children:e.jsx("img",{src:"/assets/logo.png",alt:"SolveSphere",className:"block h-14 w-auto"})})]}):e.jsx("div",{className:"flex items-center",children:e.jsx(n,{href:route("dashboard"),children:e.jsx("img",{src:"/assets/logo.png",alt:"Logo Web",className:"block h-20 w-auto"})})})}),e.jsxs("nav",{className:"mt-10 space-y-1 px-2",children:[e.jsx(a,{href:route("dashboard"),active:route().current("dashboard"),children:"Dashboard"}),e.jsx(a,{href:route("reports.index"),active:route().current("reports.index"),children:"Reports"}),e.jsx(a,{href:route("forum-topics.index"),active:route().current("forum-topics.index"),children:"Forum"}),e.jsx(a,{href:route("news.index"),active:route().current("news.index"),children:"News"}),(r.role!=="general_user"||r.partner_id)&&e.jsx(a,{href:route("chat.index"),active:route().current("chat.*"),children:"Messages"}),r.role==="super_admin"&&e.jsx(a,{href:route("super-admin.partners.index"),active:route().current("super-admin.partners.*"),children:"Manage Partners"}),r.role==="partner_admin"&&e.jsxs(e.Fragment,{children:[e.jsx(a,{href:route("partner-admin.partner-admins.index"),active:route().current("partner-admin.partner-admins.*"),children:"Manage Admins"}),e.jsx(a,{href:route("partner-admin.users.index"),active:route().current("partner-admin.users.*"),children:"Manage Users"}),e.jsx(a,{href:route("partner-admin.subscription.index"),active:route().current("partner-admin.subscription.*"),children:"Subscription"})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("header",{className:"flex justify-between items-center py-4 px-6 bg-white dark:bg-gray-800 border-b-4 border-indigo-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>m(!g),className:"text-gray-500 dark:text-gray-300 focus:outline-none lg:hidden",children:e.jsx("svg",{className:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6H20M4 12H20M4 18H11"})})}),e.jsx("button",{onClick:()=>p(!u),className:"hidden lg:block text-gray-500 dark:text-gray-300 focus:outline-none ml-4",children:e.jsx("svg",{className:"h-6 w-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6H20M4 12H20M4 18H11"})})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:b,className:"p-2 rounded-full text-gray-500 bg-gray-100 dark:text-gray-400 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none",children:o==="dark"?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>h(c==="notifications"?!1:"notifications"),className:"p-2 rounded-full text-gray-500 bg-gray-100 dark:text-gray-400 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none relative",children:[e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),i.auth.notifications&&i.auth.notifications.length>0&&e.jsx("span",{className:"absolute top-0 right-0 block h-2 w-2 rounded-full ring-2 ring-white bg-red-400"})]}),c==="notifications"&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 z-50 max-h-96 overflow-y-auto",children:[e.jsx("div",{className:"px-4 py-2 border-b border-gray-100 dark:border-gray-700 font-semibold text-gray-700 dark:text-gray-300",children:"Notifications"}),i.auth.notifications&&i.auth.notifications.length>0?i.auth.notifications.map(s=>e.jsxs(n,{href:s.data.url,className:"block px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition duration-150 ease-in-out",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.data.message}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:new Date(s.created_at).toLocaleDateString()})]},s.id)):e.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400 text-center",children:"No new notifications"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>h(c==="profile"?!1:"profile"),children:[e.jsx("div",{className:"mr-2",children:e.jsx("img",{src:r.profile_picture?r.profile_picture.startsWith("http")||r.profile_picture.startsWith("data:")?r.profile_picture:`/storage/${r.profile_picture.replace("public/","")}`:`https://i.pravatar.cc/50?u=${r.id}`,alt:r.name,className:"h-8 w-8 rounded-full object-cover"})}),e.jsx("div",{className:"font-medium text-base text-gray-800 dark:text-gray-200",children:r.name})]}),c==="profile"&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 z-50",children:[e.jsx(n,{href:route("profile.edit"),className:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Profile"}),e.jsx(n,{href:route("logout"),method:"post",as:"button",className:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Log Out"})]})]})]})]}),d&&e.jsx("header",{className:"bg-white dark:bg-gray-800 shadow",children:e.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:d})}),e.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 dark:bg-gray-900",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:x})})]})]})}function a({href:r,active:d,children:x}){return e.jsx(n,{href:r,className:`flex items-center px-2 py-2 text-base font-medium rounded-md transition duration-150 ease-in-out ${d?"bg-indigo-100 text-indigo-900 dark:bg-indigo-900 dark:text-white":"text-gray-600 hover:bg-gray-50 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white"}`,children:x})}export{v as A};
