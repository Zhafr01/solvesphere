import{u as g,j as e,H as b,L as a}from"./app-BogXYbJ6.js";import{A as m}from"./AuthenticatedLayout-BQ-gjTkP.js";/* empty css            */function v({auth:r,forumTopic:s}){const{data:d,setData:l,post:n,processing:i,reset:o}=g({content:""}),x=t=>{t.preventDefault(),n(route("forum-topics.comments.store",s.id),{onSuccess:()=>o("content")})},c=r.user.id===s.user_id,h=(new Date-new Date(s.created_at))/6e4<15;return e.jsxs(m,{user:r.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:s.title}),children:[e.jsx(b,{title:s.title}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:s.title}),c&&h&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(a,{href:route("forum-topics.edit",s.id),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Edit"}),e.jsx(a,{href:route("forum-topics.destroy",s.id),method:"delete",as:"button",className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",children:"Delete"})]})]}),e.jsxs("div",{className:"flex items-start mt-4",children:[e.jsx("img",{src:s.user?.profile_picture?s.user.profile_picture.startsWith("http")||s.user.profile_picture.startsWith("data:")?s.user.profile_picture:`/storage/${s.user.profile_picture}`:`https://i.pravatar.cc/50?u=${s.user_id}`,alt:s.user?.name||"Unknown User",className:"h-12 w-12 rounded-full mr-4 object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"prose dark:prose-invert max-w-none mt-2",dangerouslySetInnerHTML:{__html:s.content}}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:["By ",e.jsx("span",{className:"text-blue-500 hover:underline",children:s.user?.name||"Unknown User"}),s.user?.role==="admin"&&e.jsx("span",{className:"ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:"Admin"}),"on ",new Date(s.created_at).toLocaleDateString()]})]})]})]})}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Comments"}),s.comments.map(t=>e.jsx("div",{className:`bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg mt-4 ${t.id===s.best_answer_id?"border-2 border-green-500":""}`,children:e.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("img",{src:t.user?.profile_picture?t.user.profile_picture.startsWith("http")||t.user.profile_picture.startsWith("data:")?t.user.profile_picture:`/storage/${t.user.profile_picture}`:`https://i.pravatar.cc/50?u=${t.user_id}`,alt:t.user?.name||"Unknown User",className:"h-10 w-10 rounded-full mr-4 object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"prose dark:prose-invert max-w-none mt-2",dangerouslySetInnerHTML:{__html:t.content}}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:["By ",e.jsx("span",{className:"text-blue-500 hover:underline",children:t.user?.name||"Unknown User"}),t.user?.role==="admin"&&e.jsx("span",{className:"ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:"Admin"}),"on ",new Date(t.created_at).toLocaleDateString()]}),e.jsx("div",{className:"flex items-center mt-4",children:e.jsxs(a,{href:route("comments.like",t.id),method:"post",as:"button",className:"flex items-center text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:[e.jsx("svg",{className:`h-5 w-5 ${t.likes.some(u=>u.id===r.user.id)?"text-blue-500":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017a2 2 0 01-1.99-1.938l-1.333-6.665A2 2 0 0110 9.42V6a2 2 0 012-2h2a2 2 0 012 2v4z"})}),e.jsx("span",{className:"ml-1",children:t.likes.length})]})})]}),t.id===s.best_answer_id&&e.jsx("span",{className:"ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Best Answer"})]}),!s.best_answer_id&&(r.user.id===s.user_id||r.user.role==="partner_admin"||r.user.role==="super_admin")&&e.jsx(a,{href:route("forum-topics.best-answer",[s.id,t.id]),method:"post",as:"button",className:"mt-4 bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:"Mark as Best Answer"})]})},t.id))]}),e.jsx("div",{className:"mt-8",children:e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"content",className:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2",children:"Add a comment"}),e.jsx("textarea",{name:"content",id:"content",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 dark:text-gray-300 dark:bg-gray-700 dark:border-gray-600 leading-tight focus:outline-none focus:shadow-outline",value:d.content,onChange:t=>l("content",t.target.value)})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",disabled:i,children:"Submit"})]})})]})}export{v as default};
